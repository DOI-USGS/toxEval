<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shiny App • toxEval</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Shiny App">
<meta property="og:description" content="toxEval">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-53797708-7"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-53797708-7');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">toxEval</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.1.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/Introduction.html">Background</a>
</li>
<li>
  <a href="../articles/basicWorkflow.html">Basic Workflow</a>
</li>
<li>
  <a href="../reference/index.html">Function Help</a>
</li>
<li>
  <a href="../articles/PrepareData.html">Data Preparation</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/shinyApp.html">Shiny App</a>
    </li>
    <li>
      <a href="../articles/benchmarks.html">Exploring Benchmarks</a>
    </li>
    <li>
      <a href="../articles/pivot.html">Prepare Data in R</a>
    </li>
    <li>
      <a href="../articles/does_curves.html">Dose Response Curves</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/bibliography.html">Bibliograpy</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/USGS-R/toxEval">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Shiny App</h1>
            
            <h4 class="date">28 April, 2020</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/USGS-R/toxEval/blob/master/vignettes/shinyApp.Rmd"><code>vignettes/shinyApp.Rmd</code></a></small>
      <div class="hidden name"><code>shinyApp.Rmd</code></div>

    </div>

    
    
<div id="using-the-shiny-application" class="section level1">
<h1 class="hasAnchor">
<a href="#using-the-shiny-application" class="anchor"></a>Using the Shiny Application</h1>
<p>The Shiny application (the app) is a quick and convenient way to explore data through a graphical user interface in the user’s default browser. As with the R-package, ToxCast is the default biological endpoint database used to evaluate data. A user can override this default by providing a custom set of endpoints (e.g. aquatic life benchmarks).</p>
<p>The interaction with the app is primarily “point and click”. The app includes multiple ways to visualize data through boxplots, barcharts, tables and an overview map. Numerous options can be selected to customize presentation of data by choosing to focus on chemicals, chemical classes, biologically relevant endpoing groupings, and specific suites of ToxCast assays. All resulting graphics, tables, and data can be downloaded for use outside of the app.</p>
<p>While the app is useful and quite flexible as is, it also serves as a good starting point for a more in-depth user- and study-specific analysis. All of the output on the Shiny app can be created directly in R as well. For flexibility beyond what the app offers, the R-code to produce each graph and table is displayed in the app. The user may copy this code into a script and customize it for specific study needs. The help file for each function provides instructions and example workflows (R code) for their use.</p>
<p>To run the app, load the <code>toxEval</code> package, and run the <code>explore_endpoints</code> function:</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">toxEval</span>)
<span class="fu"><a href="../reference/explore_endpoints.html">explore_endpoints</a></span>()</pre></body></html></div>
<p>The computer’s default browser will open up and display the following page:</p>
<p><img src="main.png" width="324"></p>
<p>The app can be divided into 3 main sections:</p>
<p>The left sidebar (with the black background) is used to load the data and set up the conditions for analysis. Options for this section are described in the “Sidebar” section below.</p>
<p>The main visualization display section includes a variety of tabs to choose from to explore the data in different ways. Each section is described in the section “Main Output”.</p>
<p>The bottom section, “R Code:”, displays the R code to reproduce the analysis directly in R using the <code>toxEval</code> R-package functions. The code can be copied and pasted directly into the R console, or (preferred for reproduciblity!) saved in an R script. Information on this option is provided below in the “R Code” section.</p>
<div id="sidebar-options" class="section level2">
<h2 class="hasAnchor">
<a href="#sidebar-options" class="anchor"></a>Sidebar options</h2>
<p><img src="sidebar.png" width="114" style="float:right; padding:10px"></p>
<p>The sidebar offers a host of options for customizing the analysis. This document will attempt to describe the logistics of options. This document will not go into the scientific details of what options to choose. These details are dependent on individual study objectives as defined by the user. An example case study that has defined options for a specific study of water quality has been published in <a href="https://pubs.acs.org/doi/10.1021/acs.est.7b01613">Blackwell et al., 2017</a>.</p>
<div id="a--load-data-file" class="section level3">
<h3 class="hasAnchor">
<a href="#a--load-data-file" class="anchor"></a>A. Load Data File</h3>
<p>Once the Shiny App has been launched, the first step is to load the data. The data should be prepared as described in the <a href="PrepareData.html">Prepare Data vignette</a>. Click on the “Browse” button and navigate to the properly prepared Excel file. Once a file is selected, the data will be loaded into the application. There is a progress bar while the data loads, but sometimes it may take a little more time to view the data as each individual graph/map/table also takes some time to develop.</p>
<p>Alternatively, there is a button “Load Example Data”. This loads the example data provided within the <code>toxEval</code> package. This is a nice way to easily explore the application before preparing your own data.</p>
</div>
<div id="b--group-by-option" class="section level3">
<h3 class="hasAnchor">
<a href="#b--group-by-option" class="anchor"></a>B. ‘Group By’ option</h3>
<p>The “Group By” radio buttons affect all output in the application. For each function, the data will be summarized by summing individual EARs. How summations are grouped depends on this choice.</p>
<p>The “Group” choice will group all of the endPoints that have similar groupings based on the options as determined by the designated “Annotation”. The default annotation is “intended_target_family”. With that choice, the “Group” radio button groups all EARs by the unique categories in the “intended_target_family” category.</p>
<p>The “Chemical” choice will group all of the endPoints in a single chemical (as defined by unique CAS).</p>
<p>The “Class” choice will group all of the endpoints in all of the chemicals for each chemical class as defined in the “Chemical” sheet in the Excel file.</p>
</div>
<div id="c--mean-and-maximum-summarize-by-site" class="section level3">
<h3 class="hasAnchor">
<a href="#c--mean-and-maximum-summarize-by-site" class="anchor"></a>C. Mean and Maximum: Summarize by site</h3>
<p>The options are “MeanEAR” and “MaxEAR”, and they dictate how to summarize the EARs per site. Each site may have different numbers of collected samples. Mean or max can be chosen based on the objectives of specific analyses.</p>
</div>
<div id="d--download-benchmarks" class="section level3">
<h3 class="hasAnchor">
<a href="#d--download-benchmarks" class="anchor"></a>D. Download benchmarks</h3>
<p>Clicking on this button will download the current set of benchmarks that is currently being used for <code>toxEval</code> computations as a comma delimited (csv) file. This file is formated such that it could be used in the “Benchmark” sheet (as described in the “Prepare Data” vignette). The provided columns are “CAS”, “Chemical” (name), “flags”, “endPoint”, “ACC”, “MlWt”, “Value”, “groupCol”, and “assaysFull”.</p>
<p>The “ACC” column is in log(<span class="math inline">\(\mu\)</span>M), and the “Value” column is the ACC converted to units of <span class="math inline">\(\mu\)</span>g/L.</p>
</div>
<div id="e--assay" class="section level3">
<h3 class="hasAnchor">
<a href="#e--assay" class="anchor"></a>E. Assay</h3>
<p><img src="assays.png" width="72" style="float:right; padding:10px"></p>
<p>The “Assay” dropdown menu offers the option to remove certain sets of assays from the analysis (see image to the right). By default, the “BioSeek” assay is not included. Clicking on any of the options will not have an immediate affect until the “Switch Assays” button is clicked.</p>
</div>
<div id="f--annotations" class="section level3">
<h3 class="hasAnchor">
<a href="#f--annotations" class="anchor"></a>F. Annotations</h3>
<p>The “Annotation” dropdown offers the choice of which ToxCast grouping to analyze. These options include columns that are available directly in the ToxCast database file. By default, the “intended_target_family” is picked, but there may be other more appropriate options based on the scope of the analysis. Choosing a new annotation will not have an immediate affect until the “Switch Annotation” button is clicked.</p>
</div>
<div id="g--group" class="section level3">
<h3 class="hasAnchor">
<a href="#g--group" class="anchor"></a>G. Group</h3>
<p>The options in the “Group” dropdown change depending on the choice in Annotations. For “intended_target_family” for example, there are 26 choices such as “Nuclear Receptors”, “Cell Cycle”, “DNA Binding”, etc. Selected groups may be ignored in the analysis (“Background Measurement” for instance) by leaving the options unchecked. Clicking on and off the checkboxes will not have an immediate affect until the “Switch Groups” button is clicked.</p>
</div>
<div id="h--flags" class="section level3">
<h3 class="hasAnchor">
<a href="#h--flags" class="anchor"></a>H. Flags</h3>
<p><img src="flags.png" width="72" style="float:right; padding:10px"></p>
<p>ToxCast endpoint:chemical assay results may have data quality flags associated with them. The “Flags” dropdown menu provide the user with a choice to include or exclude endpoints with specific flags associated with them. By default, endPoints flagged with “Noisy Data”, “Only one conc above baseline, active”, and “Hit-call potentially confounded by overfitting” are included in the analysis, and all other endpoints with associated flags are excluded. The scope of the analysis may user customization for flagged endPoints. Clicking on the flag checkboxes will not have an immediate affect until the “Switch Flags” button is clicked.</p>
</div>
<div id="i--sites" class="section level3">
<h3 class="hasAnchor">
<a href="#i--sites" class="anchor"></a>I. Sites</h3>
<p>By default, the analysis is done on all sites within the data set; however, the user can choose to explore results from individual sites using this dropdown menu. Each graph and table may show the individual site data a bit different than the full data set analysis. These differences are described in the “Basic Workflow” vignette.</p>
</div>
<div id="j--hit-threshold" class="section level3">
<h3 class="hasAnchor">
<a href="#j--hit-threshold" class="anchor"></a>J. Hit Threshold</h3>
<p>There are a few outputs (from the tabs: Hit Count, Site Hits, and Endpoint Hits) that will calculate the number of “Hits” which is simply the number of times the EAR is above a designated threshold. That threshold value is defined here. Changing the threshold will not have an immedate affect until the “Change Hit Threshold” button is clicked.</p>
</div>
</div>
<div id="main-output" class="section level2">
<h2 class="hasAnchor">
<a href="#main-output" class="anchor"></a>Main Output</h2>
<table class="table"><tr>
<td>
<p>Each plot and table offered in the app is described in the <a href="basicWorkflow.html">Basic Workflow vignette</a>. Please refer there for more information.</p>
<p>Each plot, table, and the map are generated by functions within the R-package. The table to the right indicates the function used for each tab in the app.</p>
<p>All resulting graphics, tables, and data can be downloaded for use outside of the app. Graphics are downloaded in “png” format and tables and data are are downloaded in “csv” format. In addition, R code to reproduce each analysis in the R environment is provided at the bottom of each tab. See the “R Code” section for details.</p>
</td>
<td>
<table class="table">
<thead><tr class="header">
<th>Tab</th>
<th align="right">Function</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Map</td>
<td align="right"><a href="basicWorkflow.html#make_tox_map"><code>make_tox_map</code></a></td>
</tr>
<tr class="even">
<td>Box Plots</td>
<td align="right"><a href="basicWorkflow.html#plot_tox_boxplots"><code>plot_tox_boxplots</code></a></td>
</tr>
<tr class="odd">
<td>Bar Charts</td>
<td align="right"><a href="basicWorkflow.html#plot_tox_stacks"><code>plot_tox_stacks</code></a></td>
</tr>
<tr class="even">
<td>Max EAR and Frequency</td>
<td align="right"><a href="basicWorkflow.html#rank_sites_DT"><code>rank_sites_DT</code></a></td>
</tr>
<tr class="odd">
<td>Hit Counts</td>
<td align="right"><a href="basicWorkflow.html#hits_summary_DT"><code>hits_summary_DT</code></a></td>
</tr>
<tr class="even">
<td>Site Hits</td>
<td align="right"><a href="basicWorkflow.html#hits_by_groupings_DT"><code>hits_by_groupings_DT</code></a></td>
</tr>
<tr class="odd">
<td>Endpoint Hits</td>
<td align="right"><a href="basicWorkflow.html#endpoint_hits_DT"><code>endpoint_hits_DT</code></a></td>
</tr>
<tr class="even">
<td>Endpoint</td>
<td align="right"><a href="basicWorkflow.html#plot_tox_endpoints"><code>plot_tox_endpoints</code></a></td>
</tr>
<tr class="odd">
<td>Heat Map</td>
<td align="right"><a href="basicWorkflow.html#plot_tox_heatmap"><code>plot_tox_heatmap</code></a></td>
</tr>
</tbody>
</table>
</td>
</tr></table>
</div>
<div id="r-code" class="section level2">
<h2 class="hasAnchor">
<a href="#r-code" class="anchor"></a>R Code</h2>
<p>Each tab is generated based on specific functions within the R-Package, and the appropriate code to reproduce results from each tab is provided at the bottom of the tab. Modification of this code in the R environment allows the user to customize plots and tables based on specific study needs.</p>
<p>The app provides many graphics and tables to work through a data analysis, some users may wish to have a record of what has been done, or to save specific analyses that prove to be particularly useful. By copying and pasting the R code, users by developing a “workflow” script that has all analysis saved in one place rather than needing to go through the process of choosing the many options needed to reproduce exactly what was done previously in the app. This workflow can serve as a valuable resource that results in reliably reproducible research. In the event of a need to modify a data set, it can also be used to efficiently update a data analysis without having to reproduce each step in the app manually.</p>
</div>
</div>
<div id="logistics" class="section level1">
<h1 class="hasAnchor">
<a href="#logistics" class="anchor"></a>Logistics</h1>
<div id="reporting-bugs" class="section level2">
<h2 class="hasAnchor">
<a href="#reporting-bugs" class="anchor"></a>Reporting bugs</h2>
<p>Please consider reporting bugs and asking questions on the Issues page: <a href="https://github.com/USGS-R/toxEval/issues">https://github.com/USGS-R/toxEval/issues</a></p>
</div>
<div id="citing-toxeval" class="section level2">
<h2 class="hasAnchor">
<a href="#citing-toxeval" class="anchor"></a>Citing toxEval</h2>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/citation.html">citation</a></span>(<span class="kw">package</span> <span class="kw">=</span> <span class="st">"toxEval"</span>)</pre></body></html></div>
<pre><code>## 
## To cite toxEval in publications, please use:
## 
##   De Cicco, L.A., Corsi, S.R., Villeneuve D.L,
##   Blackwell, and B.R, Ankley, G.T., 2018, toxEval:
##   Evaluation of measured concentration data using the
##   ToxCast high-throughput screening database or a
##   user-defined set of concentration benchmarks. R
##   package version 1.1.0.,
##   https://code.usgs.gov/water/toxEval,
##   doi:10.5066/P906UQ5I
## 
## A BibTeX entry for LaTeX users is
## 
##   @Manual{,
##     author = {Laura A. {De Cicco} and Steven R. Corsi and Daniel L. Villeneuve and Brett R. Blackwell and Gerald T. Ankley},
##     title = {toxEval: Evaluation of measured concentration data using the ToxCast high-throughput screening database or a user-defined set of concentration benchmarks.},
##     publisher = {U.S. Geological Survey},
##     version = {1.1.0},
##     address = {Reston, VA},
##     institution = {U.S. Geological Survey},
##     year = {2019},
##     doi = {10.5066/P906UQ5I},
##     url = {https://code.usgs.gov/water/toxEval},
##   }</code></pre>
</div>
<div id="disclaimer" class="section level2">
<h2 class="hasAnchor">
<a href="#disclaimer" class="anchor"></a>Disclaimer</h2>
<p>This software has been approved for release by the U.S. Geological Survey (USGS). Although the software has been subjected to rigorous review, the USGS reserves the right to update the software as needed pursuant to further analysis and review. No warranty, expressed or implied, is made by the USGS or the U.S. Government as to the functionality of the software and related material nor shall the fact of release constitute any such warranty. Furthermore, the software is released on condition that neither the USGS nor the U.S. Government shall be held liable for any damages resulting from its authorized or unauthorized use.</p>
<p>Any use of trade, firm, or product names is for descriptive purposes only and does not imply endorsement by the U.S. Government.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Laura DeCicco, Steven Corsi, Daniel Villeneuve, Brett Blackwell, Gerald Ankley.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
