---
title: "Shiny App"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output: 
  rmarkdown::html_vignette:
    toc: true
    number_sections: false
    fig_caption: yes
    fig_height: 10
    fig_width: 7
vignette: >
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteIndexEntry{Shiny App}
  \usepackage[utf8]{inputenc}
---


```{r setup, include=FALSE}
library(knitr)
library(rmarkdown)
options(continue=" ")
options(width=60)
knitr::opts_chunk$set(echo = TRUE,
                      warning = FALSE,
                      message = FALSE)
```


# Using the Shiny Application

All of the output on the Shiny app can be created directly in R as well. Using the app is a quick and convenient way to explore your data. For more customization, the R-code to produce each graph and table is displayed in the app. That is a good starting-point for a custom analysis. See the help file for any functions on details and example workflows.

To run the app, load the `toxEval` package, and run the `explore_endpoints` function:

```{r runApp, eval=FALSE}
library(toxEval)
explore_endpoints()
```

Your default browser will open up and display the following page:

![main layout](main.png)

Generally the app can be divided into 3 main sections:

The left sidebar (with the black background) will be used to load the data and set up the conditions for analysis. The options here will be described in the next section.

The top main section includes a variety of tabs to choose from to explore the data in different ways. Each section will be described in the section "Main Output".

The bottom section "R Code:" shows the exact code you could use to run directly in R to reproduce the analysis. The code can be copied and pasted directly into the R console, or (preferred for reproducible!) saved in an R script. One important note is that the local path to the file is not recorded, so if your data file is not located in your current working directory, you'll need to add the path to your file name.

## Sidebar options

<img style="float: right;" src="sidebar.png">

The sidebar offers a host of options for customizing the analysis. This document will attempt to describe the logistics of options. This document will NOT go into the scientific details of what options to choose. That will need to be up to the user. 


### A. Load data

### B. Group by options

### C. Summarize by site

### D. Download benchmarks

### E. Assay

![Assay](assays.png)

### F. Annotations
![annotations](annotations.png)

### G. Group

![group](group.png)

### H. Flags

![flags](flags.png)

### I. Sites

![sites](sites.png)

### J. Hit Threshold

![thres](thres.png)

## Main Output

# Package logistics

## Installation of R and RStudio

This section should only need to be done once per computer. The following link walks you through an installation of R and RStudio:

[Installation Instructions](https://owi.usgs.gov/R/training-curriculum/installr/)

If you follow those instructions exactly, you should have the USGS R repository (GRAN) added to your R profile. If that step doesn't ring a bell, paste the following into your R console:

```{r, eval=FALSE}
rprofile_path = file.path(Sys.getenv("HOME"), ".Rprofile")
write('\noptions(repos=c(getOption(\'repos\'),
    CRAN=\'https://cloud.r-project.org\',
    USGS=\'https://owi.usgs.gov/R\'))\n',
      rprofile_path, 
      append =  TRUE)

cat('Your Rprofile has been updated to include GRAN.
    Please restart R for changes to take effect.')
```

*RESTART RSTUDIO!*

Useful links:

* [Download R Windows](https://cran.r-project.org/bin/windows/base/)
* [Download R Mac](https://cran.r-project.org/bin/macosx/)
* [Download RStudio](https://www.rstudio.com/products/rstudio/download/)


## Installation of toxEval

This section should also only have to be done once. It assumes the USGS R repository (GRAN) was added to your R profile as described above.

```{r, eval=FALSE}
install.packages("toxEval")
```

## Update toxEval

Regularly, it is a good idea to update *ALL* your packages in R. If using RStudio, this is quite easy, there's an Update button in the "Packages" tab. This checks CRAN and GRAN for updates. It is a good idea to click this update regularly.

![update](update.png)

Within the R-console, packages can be update with the command:
```{r eval=FALSE}
update.packages()
```

## Reporting bugs

Please consider reporting bugs and asking questions on the Issues page:
[https://github.com/USGS-R/toxEval/issues](https://github.com/USGS-R/toxEval/issues)

## Citing toxEval

This package has not been reviewed and approved as a USGS-product. The implication is that `toxEval` cannot be cited in a publication. Once the software has been reviewed and approved, basic citation information will be available using the function:

```{r, eval=FALSE}
citation(package = "toxEval")
```


# Disclaimer

This software is in the public domain because it contains materials that originally came from the U.S. Geological Survey  (USGS), an agency of the United States Department of Interior. For more information, see the official USGS copyright policy at [https://www.usgs.gov/visual-id/credit_usgs.html#copyright](https://www.usgs.gov/visual-id/credit_usgs.html#copyright)

Although this software program has been used by the USGS, no warranty, expressed or implied, is made by the USGS or the U.S. Government as to the accuracy and functioning of the program and related program material nor shall the fact of distribution constitute any such warranty, and no responsibility is assumed by the USGS in connection therewith.

This software is provided "AS IS."

Any use of trade, firm, or product names is for descriptive purposes only and does not imply endorsement by the U.S. Government.

 [
   ![CC0](http://i.creativecommons.org/p/zero/1.0/88x31.png)
 ](http://creativecommons.org/publicdomain/zero/1.0/)


